(()=>{"use strict";var e={130:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0,t.Component=class{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}},394:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectItem=void 0;const s=n(499),o=n(130);class i extends o.Component{get persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}constructor(e,t){super("single-project",e,!1,t.id),this.project=t,this.configure(),this.renderContent()}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){console.log("DragEnd")}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned",this.element.querySelector("p").textContent=this.project.description}}t.ProjectItem=i,r([s.autobind],i.prototype,"dragStartHandler",null)},853:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectList=void 0;const s=n(499),o=n(130),i=n(354),a=n(683),l=n(394);class c extends o.Component{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dropHandler(e){const t=e.dataTransfer.getData("text/plain");a.projectState.moveProject(t,"active"===this.type?i.ProjectStatus.Active:i.ProjectStatus.Finished)}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),a.projectState.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===i.ProjectStatus.Active:e.status===i.ProjectStatus.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new l.ProjectItem(this.element.querySelector("ul").id,e)}}t.ProjectList=c,r([s.autobind],c.prototype,"dragOverHandler",null),r([s.autobind],c.prototype,"dropHandler",null),r([s.autobind],c.prototype,"dragLeaveHandler",null)},650:function(e,t,n){var r=this&&this.__decorate||function(e,t,n,r){var s,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectInput=void 0;const s=n(130),o=n(518),i=n(499),a=n(683);class l extends s.Component{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,t=this.descriptionInputElement.value,n=this.peopleInputElement.value,r={value:e,required:!0},s={value:t,required:!0,minLength:5},i={value:+n,required:!0,min:1,max:5};return(0,o.validate)(r)&&(0,o.validate)(s)&&(0,o.validate)(i)?[e,t,+n]:void alert("Invalid input, please try again!")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;a.projectState.addProject(e,n,r),this.clearInputs()}}}t.ProjectInput=l,r([i.autobind],l.prototype,"submitHandler",null)},499:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.autobind=void 0,t.autobind=function(e,t,n){const r=n.value;return{configurable:!0,get(){return r.bind(this)}}}},354:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Project=t.ProjectStatus=void 0,function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(n||(t.ProjectStatus=n={})),t.Project=class{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}},683:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.projectState=t.ProjectState=t.State=void 0;const r=n(354);class s{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}t.State=s;class o extends s{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new o),this.instance}addProject(e,t,n){const s=new r.Project(Math.random().toString(),e,t,n,r.ProjectStatus.Active);this.projects.push(s),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}t.ProjectState=o,t.projectState=o.getInstance()},518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0,t.validate=function(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),null!=e.minLength&&"string"==typeof e.value&&(t=t&&e.value.length>=e.minLength),null!=e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(()=>{const e=n(650),t=n(853);new e.ProjectInput,new t.ProjectList("active"),new t.ProjectList("finished")})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQkksV0FHdkMsTUFBeEJKLEVBQWlCbEMsS0FDaUIsaUJBQTNCa0MsRUFBaUIxQyxRQUV4QjJDLEVBQVVBLEdBQVdELEVBQWlCMUMsT0FBUzBDLEVBQWlCbEMsS0FHeEMsTUFBeEJrQyxFQUFpQmpDLEtBQ2lCLGlCQUEzQmlDLEVBQWlCMUMsUUFFeEIyQyxFQUFVQSxHQUFXRCxFQUFpQjFDLE9BQVMwQyxFQUFpQmpDLEtBRTNEa0MsQ0FDVCxDLEdDM0NFSSxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLENBQUMsR0FPWCxPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELE9BQ2YsQyxNQ3RCQSxlQUNBLFNBRUEsSUFBSSxFQUFBM0QsYUFDSixJQUFJLEVBQUE3QixZQUFZLFVBQ2hCLElBQUksRUFBQUEsWUFBWSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3Rpc2UvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9wcmFjdGlzZS8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaXRlbS50cyIsIndlYnBhY2s6Ly9wcmFjdGlzZS8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtbGlzdC50cyIsIndlYnBhY2s6Ly9wcmFjdGlzZS8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QuaW5wdXQudHMiLCJ3ZWJwYWNrOi8vcHJhY3Rpc2UvLi9zcmMvZGVjb3JhdG9ycy9hdXRvYmluZC1kZWNvcmF0b3IudHMiLCJ3ZWJwYWNrOi8vcHJhY3Rpc2UvLi9zcmMvbW9kZWxzL3Byb2plY3QtbW9kZWwudHMiLCJ3ZWJwYWNrOi8vcHJhY3Rpc2UvLi9zcmMvc3RhdGUvcHJvamVjdC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9wcmFjdGlzZS8uL3NyYy91dGlsL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vcHJhY3Rpc2Uvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3Rpc2UvLi9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIiAgICAvLyBDb21wb25lbnQgQmFzZSBDbGFzc1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQsIFUgZXh0ZW5kcyBIVE1MRWxlbWVudD4ge1xuICAgIHRlbXBsYXRlRWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICBob3N0RWxlbWVudDogVDtcbiAgICBlbGVtZW50OiBVO1xuICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgIHRlbXBsYXRlSWQ6IHN0cmluZyxcbiAgICAgIGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcbiAgICAgIGluc2VydEF0U3RhcnQ6IGJvb2xlYW4sXG4gICAgICBuZXdFbGVtZW50SWQ/OiBzdHJpbmdcbiAgICApIHtcbiAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgIHRlbXBsYXRlSWRcbiAgICAgICkhIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gICAgICB0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFQ7XG4gIFxuICAgICAgY29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQuY29udGVudCxcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZWxlbWVudCA9IGltcG9ydGVkTm9kZS5maXJzdEVsZW1lbnRDaGlsZCBhcyBVO1xuICAgICAgaWYgKG5ld0VsZW1lbnRJZCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuaWQgPSBuZXdFbGVtZW50SWQ7XG4gICAgICB9XG4gIFxuICAgICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XG4gICAgfVxuICBcbiAgICBwcml2YXRlIGF0dGFjaChpbnNlcnRBdEJlZ2lubmluZzogYm9vbGVhbikge1xuICAgICAgdGhpcy5ob3N0RWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXG4gICAgICAgIGluc2VydEF0QmVnaW5uaW5nID8gJ2FmdGVyYmVnaW4nIDogJ2JlZm9yZWVuZCcsXG4gICAgICAgIHRoaXMuZWxlbWVudFxuICAgICAgKTtcbiAgICB9XG4gIFxuICAgIGFic3RyYWN0IGNvbmZpZ3VyZSgpOiB2b2lkO1xuICAgIGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogdm9pZDtcbiAgfSIsImltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZC1kZWNvcmF0b3InO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QtbW9kZWwnO1xuaW1wb3J0IHsgRHJhZ2dhYmxlIH0gZnJvbSAnLi4vbW9kZWxzL2RyYWctYW5kLWRyb3AtaW50ZXJmYWNlJztcblxuXG5cbiAgICAvLyBQcm9qZWN0SXRlbSBDbGFzc1xuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIGV4dGVuZHMgQ29tcG9uZW50PEhUTUxVTGlzdEVsZW1lbnQsIEhUTUxMSUVsZW1lbnQ+XG5pbXBsZW1lbnRzIERyYWdnYWJsZSB7XG5wcml2YXRlIHByb2plY3Q6IFByb2plY3Q7XG5cbmdldCBwZXJzb25zKCkge1xuICBpZiAodGhpcy5wcm9qZWN0LnBlb3BsZSA9PT0gMSkge1xuICAgIHJldHVybiAnMSBwZXJzb24nO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBgJHt0aGlzLnByb2plY3QucGVvcGxlfSBwZXJzb25zYDtcbiAgfVxufVxuXG5jb25zdHJ1Y3Rvcihob3N0SWQ6IHN0cmluZywgcHJvamVjdDogUHJvamVjdCkge1xuICBzdXBlcignc2luZ2xlLXByb2plY3QnLCBob3N0SWQsIGZhbHNlLCBwcm9qZWN0LmlkKTtcbiAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcblxuICB0aGlzLmNvbmZpZ3VyZSgpO1xuICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbn1cblxuQGF1dG9iaW5kXG5kcmFnU3RhcnRIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcbiAgZXZlbnQuZGF0YVRyYW5zZmVyIS5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhpcy5wcm9qZWN0LmlkKTtcbiAgZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xufVxuXG5kcmFnRW5kSGFuZGxlcihfOiBEcmFnRXZlbnQpIHtcbiAgY29uc29sZS5sb2coJ0RyYWdFbmQnKTtcbn1cblxuY29uZmlndXJlKCkge1xuICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKTtcbiAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmRIYW5kbGVyKTtcbn1cblxucmVuZGVyQ29udGVudCgpIHtcbiAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xuICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPSB0aGlzLnBlcnNvbnMgKyAnIGFzc2lnbmVkJztcbiAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AnKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QuZGVzY3JpcHRpb247XG59XG59XG4iLCJpbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQtZGVjb3JhdG9yJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xuaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gJy4uL21vZGVscy9wcm9qZWN0LW1vZGVsJztcbmltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tICcuLi9tb2RlbHMvZHJhZy1hbmQtZHJvcC1pbnRlcmZhY2UnO1xuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvcHJvamVjdC1zdGF0ZSc7XG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gJy4vcHJvamVjdC1pdGVtJztcblxuXG4gICAgLy8gUHJvamVjdExpc3QgQ2xhc3NcbmV4cG9ydCBjbGFzcyBQcm9qZWN0TGlzdCBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEVsZW1lbnQ+XG5pbXBsZW1lbnRzIERyYWdUYXJnZXQge1xuYXNzaWduZWRQcm9qZWN0czogUHJvamVjdFtdO1xuXG5jb25zdHJ1Y3Rvcihwcml2YXRlIHR5cGU6ICdhY3RpdmUnIHwgJ2ZpbmlzaGVkJykge1xuICBzdXBlcigncHJvamVjdC1saXN0JywgJ2FwcCcsIGZhbHNlLCBgJHt0eXBlfS1wcm9qZWN0c2ApO1xuICB0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSBbXTtcblxuICB0aGlzLmNvbmZpZ3VyZSgpO1xuICB0aGlzLnJlbmRlckNvbnRlbnQoKTtcbn1cblxuQGF1dG9iaW5kXG5kcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XG4gICAgbGlzdEVsLmNsYXNzTGlzdC5hZGQoJ2Ryb3BwYWJsZScpO1xuICB9XG59XG5cbkBhdXRvYmluZFxuZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICBjb25zdCBwcmpJZCA9IGV2ZW50LmRhdGFUcmFuc2ZlciEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICBwcm9qZWN0U3RhdGUubW92ZVByb2plY3QoXG4gICAgcHJqSWQsXG4gICAgdGhpcy50eXBlID09PSAnYWN0aXZlJyA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxuICApO1xufVxuXG5AYXV0b2JpbmRcbmRyYWdMZWF2ZUhhbmRsZXIoXzogRHJhZ0V2ZW50KSB7XG4gIGNvbnN0IGxpc3RFbCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpITtcbiAgbGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3BwYWJsZScpO1xufVxuXG5jb25maWd1cmUoKSB7XG4gIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcbiAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuZHJhZ0xlYXZlSGFuZGxlcik7XG4gIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5kcm9wSGFuZGxlcik7XG5cbiAgcHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0czogUHJvamVjdFtdKSA9PiB7XG4gICAgY29uc3QgcmVsZXZhbnRQcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihwcmogPT4ge1xuICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScpIHtcbiAgICAgICAgcmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuQWN0aXZlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuRmluaXNoZWQ7XG4gICAgfSk7XG4gICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcmVsZXZhbnRQcm9qZWN0cztcbiAgICB0aGlzLnJlbmRlclByb2plY3RzKCk7XG4gIH0pO1xufVxuXG5yZW5kZXJDb250ZW50KCkge1xuICBjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xuICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuaWQgPSBsaXN0SWQ7XG4gIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9XG4gICAgdGhpcy50eXBlLnRvVXBwZXJDYXNlKCkgKyAnIFBST0pFQ1RTJztcbn1cblxucHJpdmF0ZSByZW5kZXJQcm9qZWN0cygpIHtcbiAgY29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YFxuICApISBhcyBIVE1MVUxpc3RFbGVtZW50O1xuICBsaXN0RWwuaW5uZXJIVE1MID0gJyc7XG4gIGZvciAoY29uc3QgcHJqSXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcbiAgICBuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkLCBwcmpJdGVtKTtcbiAgfVxufVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XG5pbXBvcnQgeyBWYWxpZGF0YWJsZSwgdmFsaWRhdGUgfSBmcm9tICcuLi91dGlsL3ZhbGlkYXRpb24nO1xuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kLWRlY29yYXRvcic7XG5pbXBvcnQgeyBwcm9qZWN0U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9wcm9qZWN0LXN0YXRlJztcblxuXG4gICAgLy8gUHJvamVjdElucHV0IENsYXNzXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgICB0aXRsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcbiAgICBkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwZW9wbGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoJ3Byb2plY3QtaW5wdXQnLCAnYXBwJywgdHJ1ZSwgJ3VzZXItaW5wdXQnKTtcbiAgICAgIHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJyN0aXRsZSdcbiAgICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJyNkZXNjcmlwdGlvbidcbiAgICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICcjcGVvcGxlJ1xuICAgICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5jb25maWd1cmUoKTtcbiAgICB9XG4gIFxuICAgIGNvbmZpZ3VyZSgpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xuICAgIH1cbiAgXG4gICAgcmVuZGVyQ29udGVudCgpIHt9XG4gIFxuICAgIHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xuICAgICAgY29uc3QgZW50ZXJlZFRpdGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgIGNvbnN0IGVudGVyZWREZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICBjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XG4gIFxuICAgICAgY29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XG4gICAgICAgIHZhbHVlOiBlbnRlcmVkVGl0bGUsXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICB9O1xuICAgICAgY29uc3QgZGVzY3JpcHRpb25WYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XG4gICAgICAgIHZhbHVlOiBlbnRlcmVkRGVzY3JpcHRpb24sXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtaW5MZW5ndGg6IDVcbiAgICAgIH07XG4gICAgICBjb25zdCBwZW9wbGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XG4gICAgICAgIHZhbHVlOiArZW50ZXJlZFBlb3BsZSxcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIG1pbjogMSxcbiAgICAgICAgbWF4OiA1XG4gICAgICB9O1xuICBcbiAgICAgIGlmIChcbiAgICAgICAgIXZhbGlkYXRlKHRpdGxlVmFsaWRhdGFibGUpIHx8XG4gICAgICAgICF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSB8fFxuICAgICAgICAhdmFsaWRhdGUocGVvcGxlVmFsaWRhdGFibGUpXG4gICAgICApIHtcbiAgICAgICAgYWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4hJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbZW50ZXJlZFRpdGxlLCBlbnRlcmVkRGVzY3JpcHRpb24sICtlbnRlcmVkUGVvcGxlXTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIHByaXZhdGUgY2xlYXJJbnB1dHMoKSB7XG4gICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgXG4gICAgQGF1dG9iaW5kXG4gICAgcHJpdmF0ZSBzdWJtaXRIYW5kbGVyKGV2ZW50OiBFdmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh1c2VySW5wdXQpKSB7XG4gICAgICAgIGNvbnN0IFt0aXRsZSwgZGVzYywgcGVvcGxlXSA9IHVzZXJJbnB1dDtcbiAgICAgICAgcHJvamVjdFN0YXRlLmFkZFByb2plY3QodGl0bGUsIGRlc2MsIHBlb3BsZSk7XG4gICAgICAgIHRoaXMuY2xlYXJJbnB1dHMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiIsIlxuXG4gICAgLy8gYXV0b2JpbmQgZGVjb3JhdG9yXG5leHBvcnQgZnVuY3Rpb24gYXV0b2JpbmQoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHtcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgY29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0KCkge1xuICAgICAgICBjb25zdCBib3VuZEZuID0gb3JpZ2luYWxNZXRob2QuYmluZCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGJvdW5kRm47XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gYWRqRGVzY3JpcHRvcjtcbiAgfVxuIiwiXG5cbiAgICAvLyBQcm9qZWN0IFR5cGVcbiAgICBleHBvcnQgZW51bSBQcm9qZWN0U3RhdHVzIHtcbiAgICBBY3RpdmUsXG4gICAgRmluaXNoZWRcbiAgfVxuICBcbiAgICBleHBvcnQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICBwdWJsaWMgaWQ6IHN0cmluZyxcbiAgICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nLFxuICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgICBwdWJsaWMgcGVvcGxlOiBudW1iZXIsXG4gICAgICBwdWJsaWMgc3RhdHVzOiBQcm9qZWN0U3RhdHVzXG4gICAgKSB7fVxuICB9XG4iLCJpbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QtbW9kZWwnO1xuXG5cbiAgLy8gUHJvamVjdCBTdGF0ZSBNYW5hZ2VtZW50XG4gIGV4cG9ydCB0eXBlIExpc3RlbmVyPFQ+ID0gKGl0ZW1zOiBUW10pID0+IHZvaWQ7XG5cbiAgZXhwb3J0IGNsYXNzIFN0YXRlPFQ+IHtcbiAgICBwcm90ZWN0ZWQgbGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdID0gW107XG5cbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lckZuOiBMaXN0ZW5lcjxUPikge1xuICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lckZuKTtcbiAgICB9XG4gIH1cblxuICBleHBvcnQgY2xhc3MgUHJvamVjdFN0YXRlIGV4dGVuZHMgU3RhdGU8UHJvamVjdD4ge1xuICAgIHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtdO1xuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBQcm9qZWN0U3RhdGU7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICBpZiAodGhpcy5pbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgUHJvamVjdFN0YXRlKCk7XG4gICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICBhZGRQcm9qZWN0KHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIG51bU9mUGVvcGxlOiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcbiAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxuICAgICAgICB0aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIG51bU9mUGVvcGxlLFxuICAgICAgICBQcm9qZWN0U3RhdHVzLkFjdGl2ZVxuICAgICAgKTtcbiAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgIHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgbW92ZVByb2plY3QocHJvamVjdElkOiBzdHJpbmcsIG5ld1N0YXR1czogUHJvamVjdFN0YXR1cykge1xuICAgICAgY29uc3QgcHJvamVjdCA9IHRoaXMucHJvamVjdHMuZmluZCgocHJqKSA9PiBwcmouaWQgPT09IHByb2plY3RJZCk7XG4gICAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XG4gICAgICAgIHByb2plY3Quc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgICAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlTGlzdGVuZXJzKCkge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICAgIGxpc3RlbmVyRm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBleHBvcnQgY29uc3QgcHJvamVjdFN0YXRlID0gUHJvamVjdFN0YXRlLmdldEluc3RhbmNlKCk7XG5cbiIsIlxuXG4gICAgLy8gVmFsaWRhdGlvblxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0YWJsZSB7XG4gICAgdmFsdWU6IHN0cmluZyB8IG51bWJlcjtcbiAgICByZXF1aXJlZD86IGJvb2xlYW47XG4gICAgbWluTGVuZ3RoPzogbnVtYmVyO1xuICAgIG1heExlbmd0aD86IG51bWJlcjtcbiAgICBtaW4/OiBudW1iZXI7XG4gICAgbWF4PzogbnVtYmVyO1xuICB9XG4gIFxuICBleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUodmFsaWRhdGFibGVJbnB1dDogVmFsaWRhdGFibGUpIHtcbiAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gICAgaWYgKHZhbGlkYXRhYmxlSW5wdXQucmVxdWlyZWQpIHtcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIGlzVmFsaWQgPVxuICAgICAgICBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoID49IHZhbGlkYXRhYmxlSW5wdXQubWluTGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ3N0cmluZydcbiAgICApIHtcbiAgICAgIGlzVmFsaWQgPVxuICAgICAgICBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUubGVuZ3RoIDw9IHZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB2YWxpZGF0YWJsZUlucHV0Lm1pbiAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA9PT0gJ251bWJlcidcbiAgICApIHtcbiAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPj0gdmFsaWRhdGFibGVJbnB1dC5taW47XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IG51bGwgJiZcbiAgICAgIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnbnVtYmVyJ1xuICAgICkge1xuICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZSA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heDtcbiAgICB9XG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJpbXBvcnQgeyBQcm9qZWN0SW5wdXQgfSBmcm9tICcuL2NvbXBvbmVudHMvcHJvamVjdC5pbnB1dCc7XG5pbXBvcnQgeyBQcm9qZWN0TGlzdCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3QnO1xuXG5uZXcgUHJvamVjdElucHV0KCk7XG5uZXcgUHJvamVjdExpc3QoJ2FjdGl2ZScpO1xubmV3IFByb2plY3RMaXN0KCdmaW5pc2hlZCcpOyJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRlbXBsYXRlSWQiLCJob3N0RWxlbWVudElkIiwiaW5zZXJ0QXRTdGFydCIsIm5ld0VsZW1lbnRJZCIsInRoaXMiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaG9zdEVsZW1lbnQiLCJpbXBvcnRlZE5vZGUiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImVsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlkIiwiYXR0YWNoIiwiaW5zZXJ0QXRCZWdpbm5pbmciLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJQcm9qZWN0SXRlbSIsIkNvbXBvbmVudCIsInBlcnNvbnMiLCJwcm9qZWN0IiwicGVvcGxlIiwiaG9zdElkIiwic3VwZXIiLCJjb25maWd1cmUiLCJyZW5kZXJDb250ZW50IiwiZHJhZ1N0YXJ0SGFuZGxlciIsImV2ZW50IiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJkcmFnRW5kSGFuZGxlciIsIl8iLCJjb25zb2xlIiwibG9nIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJhdXRvYmluZCIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJkcmFnT3ZlckhhbmRsZXIiLCJ0eXBlcyIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwiYWRkIiwiZHJvcEhhbmRsZXIiLCJwcmpJZCIsImdldERhdGEiLCJwcm9qZWN0U3RhdGUiLCJtb3ZlUHJvamVjdCIsIlByb2plY3RTdGF0dXMiLCJBY3RpdmUiLCJGaW5pc2hlZCIsImRyYWdMZWF2ZUhhbmRsZXIiLCJyZW1vdmUiLCJhZGRMaXN0ZW5lciIsInByb2plY3RzIiwicmVsZXZhbnRQcm9qZWN0cyIsImZpbHRlciIsInByaiIsInN0YXR1cyIsInJlbmRlclByb2plY3RzIiwibGlzdElkIiwidG9VcHBlckNhc2UiLCJpbm5lckhUTUwiLCJwcmpJdGVtIiwiUHJvamVjdElucHV0IiwidGl0bGVJbnB1dEVsZW1lbnQiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsInN1Ym1pdEhhbmRsZXIiLCJnYXRoZXJVc2VySW5wdXQiLCJlbnRlcmVkVGl0bGUiLCJ2YWx1ZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJ0aXRsZVZhbGlkYXRhYmxlIiwicmVxdWlyZWQiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwibWluTGVuZ3RoIiwicGVvcGxlVmFsaWRhdGFibGUiLCJtaW4iLCJtYXgiLCJ2YWxpZGF0ZSIsImFsZXJ0IiwiY2xlYXJJbnB1dHMiLCJ1c2VySW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJkZXNjIiwiYWRkUHJvamVjdCIsIl8yIiwiZGVzY3JpcHRvciIsIm9yaWdpbmFsTWV0aG9kIiwiY29uZmlndXJhYmxlIiwiZ2V0IiwiYmluZCIsIlN0YXRlIiwibGlzdGVuZXJzIiwibGlzdGVuZXJGbiIsInB1c2giLCJQcm9qZWN0U3RhdGUiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwibnVtT2ZQZW9wbGUiLCJuZXdQcm9qZWN0IiwiUHJvamVjdCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInVwZGF0ZUxpc3RlbmVycyIsInByb2plY3RJZCIsIm5ld1N0YXR1cyIsImZpbmQiLCJzbGljZSIsInZhbGlkYXRhYmxlSW5wdXQiLCJpc1ZhbGlkIiwidHJpbSIsImxlbmd0aCIsIm1heExlbmd0aCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=